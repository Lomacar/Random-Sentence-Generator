<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="UTF-8">
        <title>Sentence Gen 2</title>
        <style>
            p {margins: 2em}
        </style>
        <script src="jquery.js" type="text/javascript"></script>
        <script src="underscore-min.js" type="text/javascript"></script>
        <script type="text/javascript" src="csv/csv2json.js"></script>
        <script type="text/javascript" src="utilities.js"></script>
        <script type="text/javascript" src="main.js"></script>
        <script type="text/javascript" src="database.js"></script>
        <script type="text/javascript" src="constructions.js"></script>
        <script type="text/javascript">

/*       TODO        *\

-split this obscenely long document up
-use last_obj in parse_restrictions
-filter restrictions in word getting based on word type template
-enable greater than & less than for number restrictions
-make probabilities take an array like [1,0.3], allow passing down of probs and declare make probs a property of constructions
-allow restriction to target sub-constructions like {'NP.name': 'example'} or maybe {'adj.name': 'exampley'}

\********/

    /***** GLOBAL VAARRRRRSSZ! ******/

    var error_num = 0

    /********************************/

    function tamnp(){
        factored = factorPermutations(paradigms["verb"])

        for(perm in factored){
            C = new branch(CLAUSE, {tense:factored[perm][0], number: factored[perm][1], person: factored[perm][2], aspect: factored[perm][3]})

            //$(document).ready(function(e) {
            //$("body").html(stringOut(C))
            var sentence = stringOut(C);
            document.writeln('<p>'+sentence+'</p>')
            console.log(sentence)
            //console.log([C.head.head.head.aspect, C.head.head.head.tense, C.head.head.head.number, C.head.head.head.person])
            //})
        }
    }
    function oneRandom(){
        //C = new branch(CLAUSE, {tense: "pres", aspect:"simp", number:'pl'})
        C = new branch(CLAUSE)
        var sentence = stringOut(C);
        document.writeln('<p>'+sentence+'</p>')
        console.log(sentence)
        //console.log([C.head.head.head.aspect, C.head.head.head.tense, C.head.head.head.number, C.head.head.head.person])
    }

    function loopy(iters){
        for(i=0;i<iters;i++) oneRandom();
    }

    var start = new Date().getTime()

    $.when(loadNouns(),loadVerbs()).done(function(){

        var start2 = new Date().getTime()

        loopy(300);

        var end = new Date().getTime();
        console.log(end-start);
        console.log(end-start2);

    })


    </script>
    </head>

    <body>
    </body>
</html>
