<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Sentence Gen 2</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
	
	C = new node()
	C.grow = function(){
		pick = Math.random(1)
		
		switch (pick){
			case 1: copula(this)
		}
	}
	C.grow()
		
	
	function copula(n){
			
			vp = VP("cop", {name: "be"})
			np = NP("subject")		
			other = choose(
				5, NP({proper: 0, anim: "<subject.anim"}),
				5, Adj(),
				4, Compl({finite: 1}),
				3, PP({temporal: 0})
			)
			
			console.log
	}
	
	function VP(){
		
		V()
		//option(0.3, Adv())
			
	}
	
	
	function V(restrictions){
		
		var verb = getWord("verb", restrictions)
		
		if(restrictions.tense != undefined){
			//rename the name of the verb to be the tense variation
			if (!verb.name = verb.tense[restrictions.tense]){
				if(restrictions.tense == "past"){
						verb.name += "ed";
				}
				if(restrictions.tense == "future"){
						verb.name = "will "+verb.name;
				}
			}
		}
		
		console.log(verb)
	}
	
	function getWord(type, restrictions){
		var word = database[type][Math.floor(Math.random()*database[type].length)].clone()
		
		return word
	}
	
	database = {
		verb: [
			{name: "be", trans: 1, class: "state", tense: {past: "was", present: "is"}},
			{name: "walk", trans: 0, class: "activity"}
		],	
		noun: [
			{name: "Jack", proper: 1, anim: 4},
			{name: "dog", proper: 0, anim: 3}
		]
	}
	
	
	function NP(){

			label = label || arguments.callee.name
			parent = node
			node = parent[label] = {};
		
			N()
			Det()
			optional(0.2, Num())
			repeat(0.25, optional(0.3, Adj()))
			
			node = parent
	}
	
	function node(){
		
		this.parent = null
		this.children = []
		this.grow
		this.toString
		
		this.addChild = function(n){
				this.children.push(n)
				n.parent = this
		}
	}

	
</script>
</head>

<body>
</body>
</html>

{copula: {}}


node 