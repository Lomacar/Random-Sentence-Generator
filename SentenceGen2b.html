<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="UTF-8">
        <title>Sentence Gen 2</title>
        <style>
            body { margin-top: 1em }
            p {font-size: 3em; font-family: font-family: Palatino, "Palatino Linotype", "Palatino LT STD", "Book Antiqua", Georgia, serif;text-align: center; margin: 0 2em 1.5em 2em; border-bottom: 1px solid #e0e0e0;}
        </style>
        <script src="jquery.js" type="text/javascript"></script>
        <script src="underscore-min.js" type="text/javascript"></script>
        <script type="text/javascript" src="csv/csv2json.js"></script>
        <script type="text/javascript" src="utilities.js"></script>
        <script type="text/javascript" src="main.js"></script>
        <script type="text/javascript" src="database.js"></script>
        <script type="text/javascript" src="constructions.js"></script>
        <script type="text/javascript">

/*       TODO        *\

-use last_obj in parse_restrictions
-filter restrictions in word getting based on word type template
-make probabilities take an array like [1,0.3], allow passing down of probs and declare make probs a property of constructions
-allow restriction to target sub-constructions like {'NP.name': 'example'} or maybe {'adj.name': 'exampley'}

\********/

    /***** GLOBAL VAARRRRRSSZ! ******/



    /********************************/

    function tamnp(){
        factored = factorPermutations(paradigms["verb"])

        for(perm in factored){
            C = new branch(CLAUSE, {tense:factored[perm][0], number: factored[perm][1], person: factored[perm][2], aspect: factored[perm][3]})

            //$(document).ready(function(e) {
            //$("body").html(stringOut(C))
            var sentence = stringOut(C);
            document.writeln('<p>'+sentence+'</p>')
            console.log(sentence)
            //console.log([C.head.head.head.aspect, C.head.head.head.tense, C.head.head.head.number, C.head.head.head.person])
            //})
        }
    }
    function oneRandom(){
        //C = new branch(CLAUSE, {tense: "pres", aspect:"simp", number:'pl'})
        C = new branch(SENTENCE)
        var sentence = stringOut(C);
        console.log(sentence)
        return sentence
        //console.log([C.head.head.head.aspect, C.head.head.head.tense, C.head.head.head.number, C.head.head.head.person])
    }

    function loopy(iters){
        var output = ""
        for(i=0;i<iters;i++) output += '<p>'+oneRandom()+'</p>';
        $('body').append(output)
    }

    var start = new Date().getTime()

    $.when(loadLexicon('noun'),loadLexicon('verb'),loadLexicon('adjective')).done(function(){

        var start2 = new Date().getTime()

        loopy(1);

        var end = new Date().getTime();
        console.log(end-start);
        console.log(end-start2);

    })


    </script>
    </head>

    <body>
    </body>
</html>
