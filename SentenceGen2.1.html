<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="UTF-8">
        <title>Sentence Gen 2</title>
        <link href='http://fonts.googleapis.com/css?family=Crafty+Girls|Kelly+Slab|Limelight|Exo:600|Just+Me+Again+Down+Here|Oswald|Roboto+Slab|Merriweather|Raleway:200|Yanone+Kaffeesatz|Amatic+SC|Kaushan+Script|Pinyon+Script|Special+Elite|Mountains+of+Christmas|Playfair+Display:700|Oldenburg|Sancreek|Sansita+One|Abril+Fatface|Pirata+One|Cinzel+Decorative|Lemon|Quattrocento' rel='stylesheet' type='text/css'>
        <style>
            body { /*-webkit-column-count: 2; -moz-column-count: 2;*/ margin-top: 1em }
            p {margin: 0 2em 1.5em 2em; float: left; font-size: 1.5em; min-height: 2em; border-bottom: 1px solid #e0e0e0;}
        </style>
        <script src="vendor/jquery-2.1.1.min.js" type="text/javascript"></script>
        <script src="vendor/lodash.js" type="text/javascript"></script>
        <script type="text/javascript" src="csv/csv2json.js"></script>
        <script type="text/javascript" src="utilities.js"></script>
        <script type="text/javascript" src="main.js"></script>
        <script type="text/javascript" src="database.js"></script>
        <script type="text/javascript" src="constructions.js"></script>
        <script type="text/javascript">


    /***** GLOBAL VAARRRRRSSZ! ******/

    var fonts = "Crafty+Girls|Kelly+Slab|Limelight|Exo|Just+Me+Again+Down+Here|Oswald|Roboto+Slab|Merriweather|Raleway:200|Yanone+Kaffeesatz|Amatic+SC|Kaushan+Script|Pinyon+Script|Special+Elite|Mountains+of+Christmas|Playfair+Display|Oldenburg|Sancreek|Sansita+One|Abril+Fatface|Pirata+One|Cinzel+Decorative|Lemon|Quattrocento".replace(/\+/g, " ").split('|')

    /********************************/

    function tamnp(){
        factored = factorPermutations(paradigms["verb"])

        for(perm in factored){
            C = new branch(CLAUSE, {tense:factored[perm][0], number: factored[perm][1], person: factored[perm][2], aspect: factored[perm][3]})

            //$(document).ready(function(e) {
            //$("body").html(stringOut(C))
            var sentence = stringOut(C);
            document.writeln('<p>'+sentence+'</p>')
            console.log(sentence)
            //console.log([C.head.head.head.aspect, C.head.head.head.tense, C.head.head.head.number, C.head.head.head.person])
            //})
        }
    }
    function oneRandom(){
        //C = new branch(CLAUSE, {tense: "pres", aspect:"simp", number:'pl'})
        C = new branch(SENTENCE)
        var sentence = stringOut(C);
        console.log(sentence)
        return sentence
        //console.log([C.head.head.head.aspect, C.head.head.head.tense, C.head.head.head.number, C.head.head.head.person])
    }

    function loopy(iters){
        var output = ""
        var oneline

        for(i=0;i<iters;i++) {
            oneline = oneRandom()
            oneline = oneline.trim()
            oneline = '<p>' + oneline.charAt(0).toUpperCase() + oneline.slice(1) + '.</p>'
            oneline = $(oneline).css("font-family", pickOne(fonts))
            $('body').append(oneline)
        }


    }

    var start = new Date().getTime()

    $.when(loadLexicon('noun'),loadLexicon('verb'),loadLexicon('adjective')).done(function(){

        var start2 = new Date().getTime()

        loopy(300);

        var end = new Date().getTime();
        console.log(end-start);
        console.log(end-start2);

    })

    $(window).scroll(function(){

        var wintop = $(window).scrollTop(), docheight = $(document).height(), winheight = $(window).height();

        if  ($(window).scrollTop() > $(document).height() - $(window).height() - 100) {
            loopy(20)
        }

    });

    </script>
    </head>

    <body>
    </body>
</html>
